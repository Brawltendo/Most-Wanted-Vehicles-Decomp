# Most Wanted Vehicles Decomp
A WIP matching decompilation of Need for Speed Most Wanted's vehicle physics. This is NOT fully usable or pretty code in its current state, nor does it compile to a full program; you'll find a lot of instances where code was only written a certain way so that it would compile to matching assembly (along with a lot of `volatile` abuse). This is all purely for research purposes. Original code belongs to Electronic Arts.

# Decompilation requirements
If you want to decompile and match functions for yourself, you'll need to install a copy of Visual Studio .NET 2003, since Most Wanted was compiled using MSVC 7.1. Once that's installed, execute `devenv_setup.ps1`. If you've installed VS2003 somewhere other than the default location, just change the path in the script to your install location. Then once you're ready to compile, run `compile_and_gen_asm.ps1` with the relative path to your cpp file within `../speed/indep/src`, or else the compiler will fail if you try to include anything. For example, `.\compile_and_gen_asm.ps1 .\physics\behaviors\chassis.cpp` will compile any functions inside `chassis.cpp` and any functions from included files, and it'll also generate an asm file with the corresponding assembly.

For the best results when comparing functions, disassemble your game's executable using MSVC's `dumpbin` utility with this PowerShell command: `dumpbin /disasm:NOBYTES speed.exe | Out-File -FilePath speed.asm`. Then when you find a function that you want to match, run `asm_splitter.py` (Python 3 is required). Pass your assembly file, function start and end addresses, and the name of the output file as arguments for the script (ie:`py -3 asm_splitter.py --i speed.asm --addr 0068D6A0 0068D7F4 --name chassis`), and the result will be a cleaned up asm file that will make matching using a differ much easier.